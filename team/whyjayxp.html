<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Phua Yue Jun - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">RestOrRant</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/cs2103-ay1819s2-w09-3/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Phua Yue Jun - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="project-restorrant"><a class="link" href="#project-restorrant">PROJECT: RestOrRant</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>RestOrRant is a command line interface (CLI) restaurant management application that my team and I designed for the CS2103T Software Engineering module in NUS School of Computing.
For our module project, we morphed RestOrRant from an address book application into one that allows restaurant managers and waiters to perform front-end operations efficiently.
This includes allocating tables to customers, handling orders, tracking item availability and calculating bills. Managers can also view revenue and order statistics to determine how the restaurant is faring.</p>
</div>
<div class="paragraph">
<p>We split the application into four main features: Tables, Orders, Menu and Statistics. Each team member was in charge of one feature and mine was the Orders feature.
I also conceptualised and implemented the Mode system alongside my team members.</p>
</div>
<div class="paragraph">
<p>I will be sharing more about the Orders feature and Mode system in the following sections, as well as extracting the relevant parts of the User Guide and Developer Guide that I wrote for these features.</p>
</div>
<div class="paragraph">
<p>You may refer to the table below for the symbols and formatting used in this portfolio.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<colgroup>
<col style="width: 15%;">
<col style="width: 85%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><code>code</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A grey highlight with monospaced font indicates a command that can be typed into the command box of the application.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><span class="java">name</span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A blue highlight with monospaced font indicates a reference to the codebase. This could be a component, class, method, attribute or file name.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><span class="icon green"><i class="fa fa-check fa-2x"></i></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A green tick indicates the expected result that you should see after executing a command in the application.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><span class="icon icon-tip"><i class="fa fa-lightbulb-o fa-2x"></i></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A lightbulb indicates tips and tricks that might be useful to the user.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><span class="icon icon-note"><i class="fa fa-info-circle fa-2x"></i></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A blue information symbol indicates additional information for that section that is good to know.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div><div class="paragraph">
<p><span class="icon icon-important"><i class="fa fa-exclamation-circle fa-2x"></i></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A red exclamation mark symbol indicates important pointers to take note.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, I will provide a summary of the contributions that I have made to the team project. These contributions include the features that I implemented, as well as other project-related contributions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement added (Orders feature)</strong>: I added the Orders feature and all of its related commands.</p>
<div class="ulist">
<ul>
<li>
<p>What it does: It allows restaurant front-end staff to take orders from customers using the <code>addToOrder</code> command, as well as remove incorrectly inputted orders using the <code>deleteFromOrder</code> or <code>clearOrder</code> commands. They can track the current list of items ordered for each table (in Table Mode) or across all tables (in Restaurant Mode) and update their serving statuses with the <code>serve</code> command.</p>
</li>
<li>
<p>Justification: Restaurant front-end staff will need this core feature as keeping track of orders is one of the crucial front-end operations that restaurants have to manage. This feature allow orders to be handled more efficiently so that customers can be promptly attended to and served.</p>
</li>
<li>
<p>Highlights: I had to implement new classes across the four components in the architecture to support the Orders feature, allowing me to better understand the project&#8217;s architecture. I also learnt to write unit and integration tests for automated testing of the Orders feature.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Other enhancement added (Mode system)</strong>: I conceptualised the Mode system and added features related to the changing of modes.</p>
<div class="ulist">
<ul>
<li>
<p>What it does: RestOrRant has four modes for each of the four features. Users can switch between modes to use the other features by using commands, such as the <code>restaurantMode</code> and <code>tableMode</code> commands that I implemented.</p>
</li>
<li>
<p>Justification: Translating our main features into different application modes provides a functional and visual distinction between the features and makes RestOrRant more organised and clear for its users. The Mode system also allows us to provide users with only the relevant displays for each feature instead of overwhelming users with all the information at one shot.</p>
</li>
<li>
<p>Highlights: I had to work closely with my other team members as we all worked on implementing different parts of this feature together. The Mode system affects the other commands as they now need to consider the current mode. The Mode system is also designed to be easily extendable to support more modes in the future.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://nus-cs2103-ay1819s2.github.io/cs2103-dashboard/#=undefined&amp;search=whyjayxp">Project Code Dashboard</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Charted the direction and progress of the project and facilitated weekly project meetings as the team lead</p>
</li>
<li>
<p>Set up the issues tracker on GitHub for our project</p>
</li>
<li>
<p>Managed the integration of code by merging Pull Requests and ensuring compatibility</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Updated the GUI colour scheme and implemented the ability to switch between colour schemes for the different modes [PR <a href="https://github.com/cs2103-ay1819s2-w09-3/main/pull/128">#128</a>]</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Updated the README page [PR <a href="https://github.com/cs2103-ay1819s2-w09-3/main/pull/150">#150</a>]</p>
</li>
<li>
<p>Updated the User Guide</p>
<div class="ulist">
<ul>
<li>
<p>Revamped the User Guide in terms of structure and cosmetics, as well as rewrote the Introduction and Quick Start sections [PR <a href="https://github.com/cs2103-ay1819s2-w09-3/main/pull/192">#192</a>]</p>
</li>
<li>
<p>Reorganised Command Summary into table form for ease of reference [PR <a href="https://github.com/cs2103-ay1819s2-w09-3/main/pull/156">#156</a>]</p>
</li>
<li>
<p>Split commands into their respective modes for a clearer presentation [PR <a href="https://github.com/cs2103-ay1819s2-w09-3/main/pull/124">#124</a>]</p>
</li>
</ul>
</div>
</li>
<li>
<p>Updated the Developer Guide</p>
<div class="ulist">
<ul>
<li>
<p>Revamped the Developer Guide in terms of structure and cosmetics [PR <a href="https://github.com/cs2103-ay1819s2-w09-3/main/pull/194">#194</a>]</p>
</li>
<li>
<p>Rewrote the Introduction section [PR <a href="https://github.com/cs2103-ay1819s2-w09-3/main/pull/150">#150</a>]</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs reviewed (with non-trivial review comments) [PRs <a href="https://github.com/cs2103-ay1819s2-w09-3/main/pull/151">#151</a>, <a href="https://github.com/cs2103-ay1819s2-w09-3/main/pull/186">#186</a>, <a href="https://github.com/cs2103-ay1819s2-w09-3/main/pull/190">#190</a>]</p>
</li>
<li>
<p>Reported bugs for other teams in the class [Examples: <a href="https://github.com/cs2103-ay1819s2-w11-4/main/issues/113">1</a>, <a href="https://github.com/cs2103-ay1819s2-w11-4/main/issues/117">2</a>, <a href="https://github.com/cs2103-ay1819s2-w11-4/main/issues/120">3</a>, <a href="https://github.com/cs2103-ay1819s2-w11-4/main/issues/126">4</a>, <a href="https://github.com/cs2103-ay1819s2-w11-4/main/issues/129">5</a>]</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Set up GitHub, Travis, AppVeyor and Coveralls for our project</p>
</li>
<li>
<p>Set up auto-publishing of docs</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section shows the additions that I have made to the User Guide to provide information about how the Mode system and Orders features work.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>I wrote descriptions for the Mode system and the four commands to change between the modes. My description of the <code>tableMode</code> command is replicated below while my full write-ups can be found <a href="https://github.com/CS2103-AY1819S2-W09-3/main/blob/master/docs/UserGuide.adoc#32-changing-modes">here</a>.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="TM"><a class="link" href="#TM">Switching to Table Mode : <code>tableMode</code></a></h4>
<div class="paragraph">
<p>You can use this command to switch over to Table Mode for the specified table number to handle the orders of that table.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Format</strong>: <code>tableMode TABLE_NUMBER</code><br>
<strong>Shortcut</strong>: <code>TM</code></p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can only access Table Mode for tables that exist in the restaurant and are currently occupied. The tables can be updated in Restaurant Mode.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can use this command in Table Mode if you are switching to a different table number.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-none spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 95%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><span class="icon green"><i class="fa fa-check fa-2x"></i></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The user interface switches to <a href="#table-mode">Table Mode</a>.
The specified table number is also indicated in the Results Display and the Mode Display.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>For example, after executing <code>tableMode 5</code>, the Results Display shows the table number of the current table, as seen in the image below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/TableMode_RD.png" alt="TableMode RD">
</div>
</div>
<div class="paragraph">
<p>The table number will also be displayed in the Mode Display until you change the mode, as shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/TableMode_CM.png" alt="TableMode CM">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>I also wrote the Table Mode section and the descriptions for the five Orders feature commands (including one command for v2.0). My introduction for the Table Mode section and descriptions of the <code>addToOrder</code> and <code>clearOrder</code> commands are replicated below while my full write-ups can be found <a href="https://github.com/CS2103-AY1819S2-W09-3/main/blob/master/docs/UserGuide.adoc#table-mode">here</a>.</em></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="table-mode"><a class="link" href="#table-mode">Table Mode</a></h3>
<div class="paragraph">
<p>In Table Mode, you can handle orders from the current table, which is given by the table number that was specified in the <a href="#TM"><code>tableMode</code></a> command.
You can take orders, track the serving status of the items ordered, and calculate the bill for that table in this mode.</p>
</div>
<div class="paragraph">
<p>The user interface for Table Mode (in this example, for Table 5) is shown in the image below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/TMUi.png" alt="TMUi" width="790">
</div>
</div>
<div class="paragraph">
<p>The function of the side and main panels are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Order Panel</strong>: This panel shows you the list of items ordered by the current table, arranged in chronological order. It also indicates the quantity left to serve for each item, and the background turns dark when the item is fully served.</p>
</li>
<li>
<p><strong>Menu Panel</strong>: This panel displays the items on the menu along with their item codes for you to conveniently refer to when taking orders.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here are the commands that you can use in this mode to efficiently handle the orders in your restaurant.</p>
</div>
<div class="sect3">
<h4 id="AddToOrder"><a class="link" href="#AddToOrder">Adding items to an order : <code>addToOrder</code></a></h4>
<div class="paragraph">
<p>As you are taking an order from customers, this command allows you to record down the items that were ordered by the table by specifying the item code and quantity for each item that was ordered.
You may also add an item that was previously ordered by the table to increase its quantity if customers choose to order more.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The maximum quantity of an item that can be ordered by a table is 2,000,000.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The item codes for each item on the menu can be easily found in the Menu Panel.
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Format</strong>: <code>addToOrder ITEM_CODE QUANTITY [ITEM_CODE QUANTITY]…</code><br>
<strong>Shortcut</strong>: <code>add</code></p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can only add item codes that exist in the menu. You may add items to the menu using the <a href="#AddToMenu"><code>addToMenu</code></a> command in Menu Mode.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can add multiple or duplicate order items in a single command!
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If any of the item codes do not exist in the menu or if the new quantity exceeds 2,000,000, then that item and subsequent items will not be added to the order.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-none spread">
<colgroup>
<col style="width: 5%;">
<col style="width: 95%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><span class="icon green"><i class="fa fa-check fa-2x"></i></span></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>You will see a success message in the Results Display and the updated order items will be displayed in the Order Panel.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>For example, Table 5 initially has 4 items in the Order Panel as shown below. Note that the quantity of Coke ordered is 1.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/AddToOrder_Before.png" alt="AddToOrder Before" width="300">
</div>
</div>
<div class="paragraph">
<p>Suppose the customers at Table 5 want to order 1 more Cheeseburger and 1 more Coke. After executing <code>addToOrder W07 1 W13 1</code>, you will see a success message in the Results Display, as shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/AddToOrder_RD.png" alt="AddToOrder RD">
</div>
</div>
<div class="paragraph">
<p>The Order Panel will also be updated and you will now see 5 items displayed. As seen in the image below, 1 portion of Cheeseburger has been added as the 5th item, while the quantity of Coke ordered has been updated from 1 to 2.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/AddToOrder_After.png" alt="AddToOrder After" width="300">
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section shows the additions that I have made to the Developer Guide to show the implementation and design considerations for the Mode system and Orders feature.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>I described the design of the Mode system as well as the implementation of the commands that allow users to change mode. My write-up for the mode-changing commands is replicated below while my overview of the Mode system can be found <a href="https://github.com/cs2103-ay1819s2-w09-3/main/blob/master/docs/DeveloperGuide.adoc#41-mode-system">here</a>.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="sect4">
<h5 id="ChangingModes"><a class="link" href="#ChangingModes">Changing modes in general</a></h5>
<div class="paragraph">
<p>The modes of the application are defined using a <span class="java">Mode</span> enum and the current mode of the application is stored as a private attribute <span class="java">mode</span> in <span class="java">LogicManager</span>. Users can switch between modes in ROR using the <code>{XXX}Mode</code> command, such as <code>menuMode</code> and <code>tableMode</code>. When the mode of the application is changed, we need to update the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="java">Logic</span> component so that the <span class="java">mode</span> attribute in <span class="java">LogicManager</span> reflects the new current mode, since this is used to check if a command can be executed,</p>
</li>
<li>
<p><span class="java">UI</span> component so that the panels display the information that is relevant to the mode.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For all these commands, these updates are done using a new <span class="java">toMode</span> attribute added to the <span class="java">CommandResult</span> object. As an example, the figure below shows the sequence diagram for when a user executes the <code>menuMode</code> command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/MenuModeSequenceDiagram.png" alt="MenuModeSequenceDiagram" width="800">
</div>
<div class="title">Figure 1. Component interactions for <code>menuMode</code> command</div>
</div>
<div class="paragraph">
<p>Upon execution of the <code>menuMode</code> command, <span class="java">MenuModeCommand#generateCommandResult()</span> will generate a <span class="java">CommandResult</span> whose <span class="java">toMode</span> attribute is set to <span class="java">MENU_MODE</span> and return it to the <span class="java">LogicManager</span>. Now, the updates can be done for the respective components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="java">Logic</span> component: <span class="java">LogicManager</span> calls <span class="java">CommandResult#newModeStatus()</span> to retrieve the mode to be changed to and updates the current mode stored in its <span class="java">mode</span> attribute by calling <span class="java">LogicManager#changeMode()</span>. The <span class="java">CommandResult</span> is passed to <span class="java">MainWindow</span> in UI.</p>
</li>
<li>
<p><span class="java">UI</span> component: <span class="java">MainWindow</span> calls <span class="java">CommandResult#newModeStatus()</span> to retrieve the mode to be changed to and updates the display panels by calling <span class="java">MainWindow#handleChangeMode()</span>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For commands that do not involve a change in mode, <span class="java">CommandResult#newModeStatus()</span> will return <span class="java">null</span> and no updates to the current mode or display will be done.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ChangeToTableMode"><a class="link" href="#ChangeToTableMode">Changing to Table Mode for a specific table</a></h5>
<div class="paragraph">
<p>All the commands that change modes take no parameters except for Table Mode. When the user wants to perform order-related operations (eg. add an item to the table&#8217;s order), the user will first have to switch to Table Mode by typing the <code>tableMode</code> command (or its shortcut <code>TM</code>) followed by the table number of the table that the user wants to perform actions on.</p>
</div>
<div class="paragraph">
<p>The following sequence diagram shows the relevant parts of what happens when a user executes the <code>tableMode 3</code> command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/TableModeSequenceDiagram.png" alt="TableModeSequenceDiagram" width="800">
</div>
<div class="title">Figure 2. Component interactions for <code>tableMode 3</code> command</div>
</div>
<div class="paragraph">
<p>The <span class="java">Logic</span> and <span class="java">UI</span> component interactions work in a similar way to the other commands that change modes and the implementation is mentioned above. The only difference is the parsing of the argument <strong>3</strong> into a <span class="java">TableNumber</span> object that indicates the table number of the target table to switch to. This <span class="java">TableNumber</span> object is stored as an attribute in <span class="java">TableModeCommand</span>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s focus on what happens to the <span class="java">Model</span> component when <span class="java">TableModeCommand#execute()</span> is called. The relevant parts of the sequence diagram has been extracted out and shown in the diagram below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/TableModeModelSequenceDiagram.png" alt="TableModeModelSequenceDiagram" width="800">
</div>
<div class="title">Figure 3. Interaction between Logic and Model components for <code>tableMode 3</code> command</div>
</div>
<div class="paragraph">
<p>It first retrieves the <span class="java">Table</span> in RestOrRant that corresponds to its <span class="java">TableNumber</span> attribute.
The list of tables are stored within the <span class="java">Tables</span> object in <span class="java">RestOrRant</span>. The read only versions of these objects can be obtained from <span class="java">Model#getRestOrRant()</span> and then <span class="java">ReadOnlyRestOrRant#getTables()</span>. The desired <span class="java">Table</span> object can then be retrieved by passing <span class="java">TableNumber</span> into <span class="java">ReadOnlyTables#getTableFromNumber()</span>.</p>
</div>
<div class="paragraph">
<p>The <span class="java">Table</span> is then set as the selected table in <span class="java">Model</span> using <span class="java">Model#setSelectedTable()</span>. This is to keep track of the current table so that the Table Mode commands like <code>addToOrder</code> and <code>bill</code> can easily perform their operations by <a href="#CurrentTable">getting the table from <span class="java">Model#getSelectedTable()</span></a>.</p>
</div>
<div class="paragraph">
<p>After which, <span class="java">Model#updateFilteredOrderItemList()</span> is called to update the filtered list such that it only contains order items ordered by the chosen table. This will then update the item list panel in the UI to display only the order items that were ordered by the chosen table.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<span class="java">TableModeCommand#execute()</span> also checks that the application is not already in Table Mode of the same table number, the table number specified is valid, and the desired table is occupied.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Aspect</th>
<th class="tableblock halign-left valign-top">Alternative 1</th>
<th class="tableblock halign-left valign-top">Alternative 2</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defining of modes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modes are defined using a <span class="java">Mode</span> enum.<br>
- <strong>Pros</strong>: Easily identify incorrect modes since the set of valid modes is restricted to the enum values.<br>
- <strong>Cons</strong>: Need to create a new class in Logic, which increases coupling between Logic and UI components.</p>
<p class="tableblock">We decided to choose this option as the enum is an abstraction over the possible modes. Apart from being less prone to errors,
it also makes the code more readable as the enum values explicitly state the name of the mode (eg. <span class="java">TABLE_MODE</span>, <span class="java">MENU_MODE</span>) and are stored
in <span class="java">Mode</span> variables, making it clear that it refers to a mode and not just any string.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modes can be defined with strings (eg. "TableMode") or integers.<br>
- <strong>Pros</strong>: Easy to implement.<br>
- <strong>Cons</strong>: May be prone to errors (eg. mistyping a string) that causes bugs in the code.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storing of current mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mode stored in the Logic component (<span class="java">LogicManager</span>).<br>
- <strong>Pros</strong>: Easy to access the current mode to check whether a command is valid to execute in a particular mode.<br>
- <strong>Cons</strong>: Slightly breaks abstraction since mode is not purely related to command execution.</p>
<p class="tableblock">We decided to store the current mode in Logic because we note that most of the work that requires access to the current mode is done here, so providing a quick access will be more efficient.
The Model component does not need to know what the current mode is at all, so it would be better to keep the coupling low to facilitate integration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mode stored in the Model component (<span class="java">ModelManager</span>).<br>
- <strong>Pros</strong>: Maintains abstraction as the mode is part of the current state of the application, which is maintained by Model.<br>
- <strong>Cons</strong>: Increases coupling among the Model, Logic and UI components.<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifying table number for Table Mode commands</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table number specified only once when switching to Table Mode, then retrieved from <span class="java">Model#getSelectedTable()</span> for future commands.<br>
- <strong>Pros</strong>: Convenient to retrieve table number without having to explicitly specify it in every command.<br>
- <strong>Cons</strong>: Commands that change modes are not standardized since the others do not have any parameters.</p>
<p class="tableblock">We decided to go ahead with this implementation as we feel that from a user&#8217;s point of view, it would be more convenient to be able to just specify the table number once and then perform a series of operations afterwards. Furthermore, having to parse the table number for every command will also do more work.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Table number specified for every command (eg. <code>addToOrder 3 W09 1</code> to add 1x W09 to table 3).<br>
- <strong>Pros</strong>: All commands that change modes are simple and similar.<br>
- <strong>Cons</strong>: Makes the commands longer to type.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>I also described the design of the Orders feature and the implementation of the four commands that it currently supports. My design of the Orders feature and my implementation of the <code>clearOrder</code> command are replicated below while my full write-ups can be found <a href="https://github.com/cs2103-ay1819s2-w09-3/main/blob/master/docs/DeveloperGuide.adoc#43-orders-feature">here</a>.</em></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="OrdersClasses"><a class="link" href="#OrdersClasses">Classes for Orders feature in Model</a></h4>
<div class="paragraph">
<p>The Orders feature was implemented with the introduction of a new set of classes to <span class="java">Model</span>.
A new <span class="java">Orders</span> class encapsulates all the methods and classes related to this feature. It also contains a listener that is used to update the storage when any modification is made to the orders. The <span class="java">Orders</span> object is stored in <span class="java">RestOrRant</span> and it exposes a read-only interface <span class="java">ReadOnlyOrders</span> to allow the other components to retrieve order-related information while maintaining data integrity.</p>
</div>
<div class="paragraph">
<p><span class="java">Orders</span> contains a <span class="java">UniqueOrderItemList</span>, which contains a list of all the items ordered across all the tables in the restaurant, represented by <span class="java">OrderItem</span> objects. Each <span class="java">OrderItem</span> object consists of 4 objects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="java">TableNumber</span> indicates the table number of the table that ordered the item</p>
</li>
<li>
<p><span class="java">OrderItemStatus</span> tracks the quantity ordered and the quantity that has yet to be served</p>
</li>
<li>
<p><span class="java">Code</span> indicates the item code and is used to identify the item ordered</p>
</li>
<li>
<p><span class="java">Name</span> indicates the item name and is used for display in the UI</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="java">OrderItem</span> objects are uniquely identified by <span class="java">TableNumber</span>, <span class="java">Code</span> and <span class="java">Name</span> as each table can only have one order entry for each item.</p>
</div>
<div class="paragraph">
<p>The Orders Class Diagram below shows the relationship between the classes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/OrdersModelClassDiagram.png" alt="OrdersModelClassDiagram" width="800">
</div>
<div class="title">Figure 4. Orders Class Diagram in the Model component</div>
</div>
</div>
<div class="sect3">
<h4 id="CurrentTable"><a class="link" href="#CurrentTable">Getting the table number</a></h4>
<div class="paragraph">
<p>The Orders feature allows users to perform order-related operations for a specific table. The table number of that table is specified when <a href="#ChangeToTableMode">switching over to Table Mode</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The table number is stored so that users do not need to keep specifying it when typing the commands.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As a result, all the commands in the Orders feature will have to retrieve the table number from <span class="java">Model</span> first before they can perform their functions. The current table is stored as a <span class="java">Table</span> object in <span class="java">Model</span>, which is retrieved by calling <span class="java">Model#getSelectedTable()</span>.
The table number, which is represented by a <span class="java">TableNumber</span> object, can then be retrieved from that <span class="java">Table</span>. The sequence diagram for this operation is shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/CurrentTableSequenceDiagram.png" alt="CurrentTableSequenceDiagram" width="400">
</div>
<div class="title">Figure 5. Sequence diagram for retrieving the table number</div>
</div>
</div>
<div class="sect3">
<h4 id="ClearOrder"><a class="link" href="#ClearOrder">Clearing an order</a></h4>
<div class="paragraph">
<p>The user may want to remove all the order items from a specific table&#8217;s order and this can be done with the <code>clearOrder</code> command.</p>
</div>
<div class="sect4">
<h5 id="current-implementation-2"><a class="link" href="#current-implementation-2">Current Implementation</a></h5>
<div class="paragraph">
<p>When the user enters the <code>clearOrder</code> command, the command is parsed and a <span class="java">ClearOrderCommand</span> object is created.</p>
</div>
<div class="paragraph">
<p><span class="java">ClearOrderCommand#execute()</span> is then called, which in turn calls <span class="java">Model#clearOrderItemsFrom()</span> with the <a href="#CurrentTable">current TableNumber</a>.
<span class="java">Model</span> acts as a facade and forwards the call to <span class="java">Orders#clearOrderItemsFrom()</span>, and that method&#8217;s source code is replicated below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> clearOrderItemsFrom(TableNumber tableNumber) {
        <span class="predefined-type">ArrayList</span>&lt;OrderItem&gt; itemsToDelete = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();
        <span class="keyword">for</span> (OrderItem orderItem : orderItems) { <i class="conum" data-value="1"></i><b>(1)</b>
            <span class="keyword">if</span> (orderItem.getTableNumber().equals(tableNumber)) {
                itemsToDelete.add(orderItem);
            }
        }
        <span class="keyword">for</span> (OrderItem item : itemsToDelete) { <i class="conum" data-value="2"></i><b>(2)</b>
            orderItems.remove(item);
        }
        indicateModified(); <i class="conum" data-value="3"></i><b>(3)</b>
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the method above, <span class="java">orderItems</span> is a <span class="java">UniqueOrderItemList</span> that contains all the order items from all the tables. Let&#8217;s walk through this method to see how the main functionality of <code>clearOrder</code> is implemented:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>It first loops through all the items in the <span class="java">UniqueOrderItemList</span> and stores the <span class="java">OrderItem</span> objects with the current <span class="java">TableNumber</span> into a new list.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It then deletes the items in this list from the <span class="java">UniqueOrderItemList</span>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Finally, it triggers the listener in <span class="java">Orders</span> to indicate that the order item list has been modified. This signals to the <span class="java">LogicManager</span> to update the storage data files by calling <span class="java">Storage#saveOrders()</span>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The sequence diagram for when a user executes the <code>clearOrder</code> command is shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/ClearOrderSequenceDiagram.png" alt="ClearOrderSequenceDiagram" width="800">
</div>
<div class="title">Figure 6. Component interactions for <code>clearOrder</code> command</div>
</div>
</div>
<div class="sect4">
<h5 id="design-considerations-2"><a class="link" href="#design-considerations-2">Design Considerations</a></h5>
<table class="tableblock frame-all grid-all" style="width: 90%;">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Aspect</th>
<th class="tableblock halign-left valign-top">Alternative 1</th>
<th class="tableblock halign-left valign-top">Alternative 2</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storing of order items</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The order items from all the tables in RestOrRant can be stored in a single <span class="java">UniqueOrderItemList</span>.<br>
- <strong>Pros</strong>: Easier to handle a single list.<br>
- <strong>Cons</strong>: <code>clearOrder</code> needs to iterate through the entire list to delete the order items from the specific table.</p>
<p class="tableblock">We decided to choose this option because we realise that customers are unlikely to order a large number of items in a single table, so it would not be space efficient to create so many <span class="java">UniqueOrderItemList</span>.
Furthermore, it also provides the benefit of arranging the order items across all the tables based on when they were ordered without keeping an extra time attribute. This provides the useful functionality of seeing which orders should be fulfilled first in Restaurant Mode.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each table has its own <span class="java">UniqueOrderItemList</span> to store the order items for that table.<br>
- <strong>Pros</strong>: <code>clearOrder</code> will just need to create a new empty <span class="java">UniqueOrderItemList</span> to replace the existing one.<br>
- <strong>Cons</strong>: Difficult to keep track of so many lists. May be space inefficient to create multiple <span class="java">UniqueOrderItemList</span> if each list only has a few items.<br></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2019-04-15 14:27:26 UTC</div></div></div></body></html>